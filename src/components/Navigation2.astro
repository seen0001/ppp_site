---
import "../styles/style.css";
import { AnimatePresence } from "framer-motion";
---

<header>
  <div class="header">
    <div class="logo">
      <!-- <a href="/"> -->
      <div class="copyright">©</div>
      <div class="name">
        <p class="codeBy">Code By</p>
        <p class="sebastian">Sebastian</p>
        <p class="engelbreth">Engelbreth</p>
      </div>
      <!-- </a> -->
    </div>
    <div class="nav" id="nav">
      <!-- Tilføjet id til nav -->
      <div class="el">
        <p>Cases</p>
        <div class="indicator"></div>
      </div>
      <div class="el">
        <p>About</p>
        <div class="indicator"></div>
      </div>
      <div class="el">
        <p>Contact</p>
        <div class="indicator"></div>
      </div>
    </div>
  </div>

  <div class="headerButtonContainer">
    <div id="burger-button" class="button">
      <div id="burger" class="burger"></div>
    </div>
  </div>

  <style>
    .header {
      position: absolute;
      top: 0;
      color: var(--color_text);
      z-index: 2;
      display: flex;
      justify-content: space-between;
      padding: 35px;
      width: 100%;
      box-sizing: border-box;
    }

    .logo {
      font-family: "Darker Grotesque", sans-serif;
      display: flex;
      align-items: center;
      cursor: pointer;
    }

    .name {
      display: flex;
      overflow: hidden;
      white-space: nowrap;
      position: relative;
      transition: all 0.5s cubic-bezier(0.76, 0, 0.24, 1);
    }

    .codeBy,
    .sebastian,
    .engelbreth {
      margin: 0;
      padding-left: 0.3em;
      transition: transform 0.5s cubic-bezier(0.76, 0, 0.24, 1);
    }

    .engelbreth {
      position: absolute;
      left: 120px;
    }

    /* Apply hover effect to .logo, not .name */
    .logo:hover .codeBy {
      transform: translateX(-100%);
    }

    .logo:hover .sebastian {
      transform: translateX(-65%);
    }

    .logo:hover .engelbreth {
      transform: translateX(-65%);
    }

    .nav {
      display: flex;
    }

    .el {
      display: flex;
      position: relative;
      padding: 15px;
      cursor: pointer;

      .indicator {
        width: 6px;
        height: 6px;
        background-color: var(--color_text);
        position: absolute;
        border-radius: 50%;
        top: 80%;
        left: 50%;
        transform: scale(0) translateX(-50%);
        transition: transform 0.2s cubic-bezier(0.76, 0, 0.24, 1);
      }

      &:hover {
        .indicator {
          transform: scale(1) translateX(-50%);
        }
      }
    }

    .headerButtonContainer {
      position: fixed;
      transform: scale(0); /* Start som skjult */
      right: 0px;
      z-index: 4;

      .button {
        cursor: pointer;
      }

      .burger {
        width: 30px;
        height: 4px;
        background-color: black;
        margin: 5px 0;
        transition: transform 0.3s ease;
      }

      .burgerActive {
        transform: rotate(90deg); /* Eksempel på transformation, når aktiv */
      }
    }
  </style>

  <script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";
    document.addEventListener("DOMContentLoaded", function () {
      const burgerButton = document.getElementById("burger-button");
      const burger = document.getElementById("burger");
      const nav = document.getElementById("nav");

      // GSAP Animation - Scale the burger menu on scroll
      gsap.registerPlugin(ScrollTrigger);
      gsap.fromTo(
        ".headerButtonContainer",
        { scale: 0 }, // Start med scale 0
        {
          scale: 1, // Skaler til 1 når der scrollet
          scrollTrigger: {
            trigger: "body", // Scrolling the body
            start: "top top+=200", // Start animationen efter 200px scroll
            toggleActions: "play none none reverse", // Afspil ved scroll ned, reverser ved scroll op
            markers: false, // Sæt til true hvis du vil se markører til debugging
          },
          duration: 0.5, // Varighed af skaleringsanimationen
          ease: "power2.out", // Easing for glat animation
        }
      );

      // Automatisk åbning af navigationsmenuen når burger-knappen bliver synlig (ved scroll)
      ScrollTrigger.create({
        trigger: ".headerButtonContainer",
        start: "top center", // Når burger-knappen rammer midten af viewporten
        toggleClass: { targets: nav, className: "active" }, // Skift "active" class på nav
        onEnter: () => {
          burger.classList.add("burgerActive"); // Tilføj aktiv class til burger
        },
        onLeaveBack: () => {
          burger.classList.remove("burgerActive"); // Fjern aktiv class ved scrolling tilbage op
          nav.classList.remove("active"); // Skjul nav når man scroller tilbage op
        },
      });
    });
  </script>
</header>
